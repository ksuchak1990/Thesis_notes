\chapter{Forecasting Short-Term Urban Dynamics: Data Assimilation for Agent-Based Modelling}
\label{ch:malleson_tapper_ward_evans}

\section{Abstract}
\label{malleson:abstract}

\subsection{Background}
\label{malleson:abstract:background}

With such an abundance of real-world data, much research is being undertaken to produce highly accurate models of the current states of urban systems; however, the predictive capabilities of these models is limited.
This general trend also applies to agent-based models (ABMs), owing to the difficulty of incorporating up-to-date data to reduce deviation of model forecasts from reality. 

\subsection{Methods}
\label{malleson:abstract:methods}

The methods contained herein constitute a portion of ongoing work to appropriate data assimilation methods from fields including meteorology, allowing ABMs to incorporate data in real time.
This paper is based on a simple example model of people moving along a street, which is then optimised dynamically using an ensemble Kalman filter in response to hypothetical pedestrian count data.

\subsection{Findings}
\label{malleson:abstract:findings}

\begin{itemize}
    \item data assimilation technique reliably estimates the model parameter that it is attempting to optimise
    \begin{itemize}
        \item how do we measure reliability?
    \end{itemize}
    \item estimates of the `true' system state that are produced by model combined with noisy observations are less accurate than observations in isolation
\end{itemize}

\section{Introduction}
\label{malleson:intro}

With the increasing abundance of high-quality data regarding people's individual activities, there is a growing interest in smart cities --- cities that have the ability to monitor through the use of tech.
However, whilst these smart cities are able to monitor, little has thus far been down to make use of this observation to forecast and react.
It is speculated that this may be as a result of the lack of appropriate methods.

Agent-based models (ABMs) seem to be the most appropriate manner in which to model urban systems; however, calibration of ABMs typically involves the one-off injestion of historical data, then allowing the simulation to progress forward in time, likely diverging from reality and waning in accuracy.

The paper therefore seeks to present a portion of ongoing work that adapts data assimilation techniques such as those found in meteorology to allow ABMs to be optimised by real-time data.
The primary challenge to this approach is that data assimilation techniques are typically designed for systems of differential equations.
The paper presents a simple ABM used to simulate to movement of people moving down a street, which is then dynamically optimised using (hypothetical) pedestrian count data.

\section{Context}
\label{malleson:context}

There is a growing abundance of sensor networks across smart cities.
The aim of this research is to develop methods that suppress error of city-wide models of urban flow in real-time.
This investigation in particular is focussed on the city of Leeds, where policy makers have an interest in encouraging visitors to venture to the south of the city centre; to this end, an ABM has been implemented.
The model represents a pedestrianised throroughfare, where pedestrians are able to enter at one end and leave at the other, with counts of passers-by being taken at each end.
Furthermore, pedestrians are able to leave at some midpoint, without being counted.
The model therefore aims to simulate the movements of the pedestrians, with the count data being used to dynamically suppress error.  

\section{Methods}
\label{malleson:methods}

\subsection{The Agent-Based Model}
\label{malleson:methods:abm}

\subsection{The Ensemble Kalman Filter (EnKF)}
\label{malleson:methods:enkf}

\subsubsection{The forecast step}
\label{methods:enkf:forecast}

\subsubsection{The data assimilation step}
\label{methods:enkf:assimilation}

\subsection{Application of the EnKF to the ABM}
\label{malleson:methods:application}

\subsubsection{Hypothetical `Real World' Data}
\label{methods:application:data}

\subsubsection{The Forecast Step}
\label{methods:application:forecast}

\subsubsection{The Data Assimilation Step}
\label{methods:applicaiton:assimilation}

\subsubsection{\ldots and repeat \ldots}
\label{methods:application:repeat}

\section{Results}
\label{malleson:results}

\section{Conclusions and Future Outlook}
\label{malleson:conclusion}

